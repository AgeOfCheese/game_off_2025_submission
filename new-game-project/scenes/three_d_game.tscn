[gd_scene load_steps=8 format=3 uid="uid://b3s5cki1qosq6"]

[ext_resource type="Shader" uid="uid://ck1qaomucqcqu" path="res://scenes/simulation.gdshader" id="1_atnu4"]
[ext_resource type="Shader" uid="uid://qag5blhhdhi8" path="res://scenes/three_d_game.tres" id="2_fspsi"]

[sub_resource type="ViewportTexture" id="ViewportTexture_fspsi"]
viewport_path = NodePath("Simulation")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_48ow4"]
resource_local_to_scene = true
shader = ExtResource("1_atnu4")
shader_parameter/sim_tex = SubResource("ViewportTexture_fspsi")
shader_parameter/phase = 0.2
shader_parameter/attenuation = 0.999
shader_parameter/deltaUV = 3.0

[sub_resource type="ViewportTexture" id="ViewportTexture_48ow4"]
viewport_path = NodePath("Simulation")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_atnu4"]
resource_local_to_scene = true
render_priority = 0
shader = ExtResource("2_fspsi")
shader_parameter/simulation = SubResource("ViewportTexture_48ow4")

[sub_resource type="PlaneMesh" id="PlaneMesh_fspsi"]
material = SubResource("ShaderMaterial_atnu4")
subdivide_width = 500
subdivide_depth = 500

[node name="ThreeDGame" type="Node3D"]

[node name="Simulation" type="SubViewport" parent="."]
size = Vector2i(514, 514)

[node name="ColorRect" type="ColorRect" parent="Simulation"]
material = SubResource("ShaderMaterial_48ow4")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="CSGBox3D" type="CSGBox3D" parent="."]
transform = Transform3D(7.7730827, 0, 0, 0, 1, 0, 0, 0, 7.0388436, 0, 0, 0)

[node name="CSGBox3D2" type="CSGBox3D" parent="CSGBox3D"]
transform = Transform3D(0.16166224, 0, 0, 0, 1, 0, 0, 0, 1.0000001, -0.45745087, 2.6860979, 0)
size = Vector3(0.4790039, 4.33313, 1)
metadata/_edit_group_ = true

[node name="CSGBox3D4" type="CSGBox3D" parent="CSGBox3D"]
transform = Transform3D(0.0028072856, 0, -0.90540445, 0, 0.99999994, 0, 0.17849872, 0, 0.017365132, 0.016045246, 2.6860979, 0.45562565)
size = Vector3(0.5161133, 4.33313, 1)
metadata/_edit_group_ = true

[node name="CSGBox3D5" type="CSGBox3D" parent="CSGBox3D"]
transform = Transform3D(0.0028072856, 0, -0.90540445, 0, 0.99999994, 0, 0.17849872, 0, 0.017365132, 0.0147492075, 2.6860979, -0.4692783)
size = Vector3(0.5605469, 4.33313, 1)
metadata/_edit_group_ = true

[node name="CSGBox3D3" type="CSGBox3D" parent="CSGBox3D"]
transform = Transform3D(0.16166224, 0, 0, 0, 1, 0, 0, 0, 1.0000001, 0.46023875, 2.674318, 0)
size = Vector3(0.4724121, 4.3095703, 1)

[node name="Water" type="MeshInstance3D" parent="."]
transform = Transform3D(3.0927956, 0, 0, 0, 1, 0, 0, 0, 2.9006176, 0, 3.8233314, 0)
mesh = SubResource("PlaneMesh_fspsi")

[node name="Collision" type="SubViewport" parent="."]

[node name="Camera3D" type="Camera3D" parent="Collision"]
transform = Transform3D(1, 0, 0, 0, 0.028741648, -0.9995869, 0, 0.9995869, 0.028741648, 0, 0, 0)
